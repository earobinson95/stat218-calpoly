---
title: "Homework 9: Golf Driving Distances"
subtitle: "Simple Linear Regression"
embed-resources: true
format:
  html:
    toc: true
  pdf:
    keep-tex: false
    include-in-header:
      text: |
          \usepackage{fancyhdr}
          \pagestyle{fancy}
          \fancyhf{}
          \fancyhead[R]{Homework 9: Golf xxx}
          \fancyfoot[C]{\thepage}
  docx:
    toc: false
# format: html
# format: docx
# format: revealjs
execute:
  echo: true
  warning: false
  message: false
---

```{r setup}
#| include: false
library(tidyverse)
library(mosaic)
library(broom)
```

In golf the goal is to complete a hole with as few strokes as possible. A long driving distance to start a hole can help minimize the strokes necessary to complete the hole, as long as that drive stays on the fairway. Data were collecting on 354 PGA and LGPA players in 2008. For each player, the average driving distance (yards), fairway accuracy (percentage), and sex was measured.

```{r data}
golf_data <- read_csv("data/golf.csv")
head(golf_data)
```

**Research Question:** Does the accuracy of a professional golfer change when they hit the ball farther?

```{r}
ggplot(data = golf, 
       mapping = aes(x = Driving_Distance, 
                     y = Percent_Accuracy)
       ) +  
  geom_point() +  
  labs(x = "Driving Distance (yards)",  
       y = "Accuracy (%)") 
```

1. Identify the following in context of the problem:

+ Observation:

+ Explanatory Variable (and data type):

+ Response Variable (and data type):

+ Population of Interest: 

+ Sample (and Sample Size):


1. Write out the null and alternative hypotheses in words.


2. Based on the scatterplot above, does it appear that there is a relationship between driving distance and percent accuracy? Explain.


Note that we can add the line of best fit (linear regression line) on top of the scatterplot by adding an additional layer, `geom_smooth(method = 'lm', se = F)` to the code. Notice that `method = 'lm'` tells the smoothed line to be a straight line (linear regression model).

```{r}
ggplot(data = golf, 
       mapping = aes(x = Driving_Distance, 
                     y = Percent_Accuracy)
       ) +  
  geom_point() +  
  geom_smooth(method = "lm", se = F) +
  labs(x = "Driving Distance (yards)",  
       y = "Accuracy (%)") 
```

3. Set up the null and alternative hypotheses for testing for an association using the slop 

*Independent observations* (for both simulation-based and theory-based methods): individual data points must be independent.

-   Check this assumption by investigating the sampling method and determining if the observational units are related in any way.

**4. Do you believe this condition (independent observations) is violated? Why or why not?**

<!-- Your answer goes below this line -->





*Linearity* (for both simulation-based and theory-based methods): the data should follow a linear trend.

-   Check this assumption by examining the scatterplot of the two variables, the relationship on the scatterplot should appear linear.

**5. Do you believe this condition (linearity) is violated? Why or why not?**

<!-- Your answer goes below this line -->





*Equal/Constant variability* (for theory-based methods only): the variability of points around the least squares line remains roughly constant

-   Check this assumption by examining the scatterplot of the two variables, the variability in the points around the regression line should be approximately the same for all of the values of $x$. When I say the "variability in the points," I mean you should be looking at the **vertical** spread of the points.

*Nearly normal residuals* (for theory-based methods only): residuals must be nearly normal.

-   Check this assumption by examining a histogram of the residuals **or** a histogram of the response variable ($y$). The distribution of either of these values should appear approximately normal.

### Using theory-based methods

To use a $t$-distribution as an approximation for the true sampling distribution, we need to verify that the last two conditions **are not** violated.
If these conditions are violated, then we will need to use a simulation-based method (e.g. permutation or bootstrapping) instead.

**6. Based on the scatterplot, do you believe the condition of equal / constant variability is violated? Why or why not?**

<!-- Your answer goes below this line -->





To check the condition of normality, we can use either the distribution of responses or the distribution or residuals.
To obtain the residuals we have to first fit the linear regression!

To find the equation of the regression line, we use the `lm()` function.
This function takes two arguments (1) the variables we are using for our line and (2) the dataset the variables live in.
We have to specify the variables using `y ~ x` notation.

Using the skeleton code below, fill in the explanatory and response variables for our regression.

```{r regression-line, eval = F}
golf_lm <- lm(________ ~ ________, data = golf)
```

Alright, now that we've found the equation of the regression line, we can find the values of the residuals.

7. How would you find the residual for a golfer in these data?

<!-- Your answer goes below this line -->






To obtain the residuals, we use the `get_regression_points()` function.

```{r regline, echo = F}
golf_lm <- lm(Percent_Accuracy ~ Driving_Distance, data = golf)
```

```{r residuals}
get_regression_points(golf_lm) %>% 
  ggplot(mapping = aes(x = residual)) +
  geom_histogram(binwidth = 2.5)
```

Let's compare this to the distribution of the Percent Accuracy!

8. Create a histogram of the Percent Accuracy variable.

```{r pct-accuracy-hist}

# Histogram code goes here.

```


**9. Based on these histograms, do you believe the condition of normality is violated? Why or why not?**

<!-- Your answer goes below this line -->





**10. Do you believe it is "safe" to use the** $t$**-distribution to approximate the sampling distribution? Justify your answer.**

<!-- Your answer goes below this line -->





## Obtaining the regression line, p-value, and confidence interval

To obtain information about the regression line, we will use the `get_regression_table()` function.
The function takes one input, the name of the linear regression.
Remember, we stored our linear regression in an object named, `golf_lm`, so that is what we will input here!

```{r regression-equation, eval = F}
get_regression_table(_______)
```

**11. Using the output from the code above, write the equation of the regression line in the context of the problem.**

<!-- Your answer goes below this line -->





**12. Interpret the estimated slope in context of the problem.**

<!-- Your answer goes below this line -->





## Use statistical inferential methods to draw inferences from the data

### Hypothesis test

To find the value of the standardized statistic to test the slope we will use,

$$
T = \frac{\mbox{slope estimate}-0}{SE} = \frac{b_1}{SE(b_1)}.
$$

We will use the output from our regression table to obtain the estimate for slope and the standard error of the slope.

**13. What are the values of $b_1$ and $SE(b_1)$?**

<!-- Your answer goes below this line -->





**14. Calculate the t-statistic for slope. Where is this value located on the regression table?**

<!-- Your answer goes below this line -->





**15. The p-value reported in the regression table is the two-sided p-value for testing if the slope is different from 0. Report the p-value for this test.**

<!-- Your answer goes below this line -->






**16. It is standard to assume a 95% confidence level. Based on the p-value, how much evidence is there against the null hypothesis?**

<!-- Your answer goes below this line -->



22. Write a conclusion in context of the data.

Recall that a confidence interval is calculated by adding and subtracting the margin of error to the point estimate.

$$\mbox{point estimate}\pm t^*_{df} \times SE(\mbox{estimate}).$$

When the point estimate is a regression slope, this formula becomes

$$b_1 \pm t^*_{df} \times SE(b_1).$$

The $t^*$ multiplier comes from a $t$-distribution with $n-2$ degrees of freedom.
Recall for a 95% confidence interval, we use the 97.5% percentile (95% of the distribution is in the middle, leaving 2.5% in each tail).

18. The sample size for this study is 354. How many degrees of freedom will we use?


19. Report the lower and upper values of the confidence interval for the true slope.



20. Interpret the 95% confidence interval in context of the problem.



21. Does your confidence interval match the decision you made based on your p-value in question 17? Is this surprising? Explain


::: callout-caution
## Canvas Quiz

Make sure to complete the Homework Quiz on Canvas.
:::
